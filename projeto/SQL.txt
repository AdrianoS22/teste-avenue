CREATE SCHEMA WALMART;

CREATE TABLE WALMART.MAPA_LOGISTICO (
	MAPA_ID		INT			NOT NULL,
	MAPA_NOME	VARCHAR(50) NOT NULL,
	CONSTRAINT PK_MAPA PRIMARY KEY (MAPA_ID)
);

CREATE TABLE WALMART.PONTO_LOGISTICO (
	PONTO_ID	INT NOT NULL,
	PONTO_NOME	VARCHAR(50) NOT NULL,
	MAPA_ID		INT,
	CONSTRAINT PK_PONTO PRIMARY KEY (PONTO_ID),
	CONSTRAINT PONTO_FK_MAPA FOREIGN KEY (MAPA_ID)
		REFERENCES WALMART.MAPA_LOGISTICO (MAPA_ID)
);

CREATE TABLE WALMART.TRECHO_LOGISTICO (
	PONTO_ORIGEM	INT NOT NULL,
	PONTO_DESTINO	INT NOT NULL,
	DISTANCIA       INT NOT NULL,
	CONSTRAINT PK_TRECHO PRIMARY KEY (PONTO_ORIGEM, PONTO_DESTINO),
	CONSTRAINT ORIGEM_FK_PONTO FOREIGN KEY (PONTO_ORIGEM)
		REFERENCES WALMART.PONTO_LOGISTICO (PONTO_ID),
	CONSTRAINT DESTINO_FK_PONTO FOREIGN KEY (PONTO_DESTINO)
		REFERENCES WALMART.PONTO_LOGISTICO (PONTO_ID)
);